<!DOCTYPE html>
<html>
<head>
	<meta http-equiv=Content-type content="text/html; charset=utf-8">
	<title>NTYouTube</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script type="text/javascript" charset="utf-8">
	function forward() {
		var vars = [], hash;
		var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

		for(var i = 0; i < hashes.length; i++)
		{
			hash = hashes[i].split('=');
			vars.push(hash[0]);
			vars[hash[0]] = hash[1];
		}
		var hd;
		if (vars['hd'] != "1") {
			hd = "&fmt=18";
		} else {
			hd = "";
		}
		$.get("http://youtube.com/watch?v=" + vars['v'] + hd, function(data) {
			var fmt = "";
			if (data.search("'IS_HD_AVAILABLE': true") != -1 && hd != "") {
				fmt = "22";
			} else {
				fmt = "18";
			}
			downloadURLStart = data.indexOf(fmt + "|");
			downloadURLStart += 3;
			downloadURLEnd = data.substring(downloadURLStart).indexOf(",") + downloadURLStart;
			var downloadURL = data.substring(downloadURLStart, downloadURLEnd);
			downloadURL = downloadURL.replace(new RegExp("\\\\", "g"), "");
			downloadURL = downloadURL.replace(new RegExp("%2C", "g"), ",");
			alert(downloadURL);
			location.href = downloadURL;
		});
	}
		$(document).ready(function() {
			forward();
		});
	</script>
</head>
<body>
	
</body>
</html>
